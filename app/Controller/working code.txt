 app.controller('chatCtrl', function($scope,$http,DataLoader, Base64,$cookieStore,$q) {
		
		$http.get("url.properties")
		.then(function(response) {
			
				$scope.twilioUsername = response.data.twilioUsername;
				$scope.twilioAuth = response.data.twilioAuth;
				$scope.twilioMembers = response.data.twilioMembers;
			
			
			});
		
		$scope.prepareCall = function(){
			var config = {
				headers : {
					'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
				}
			}
			var base64 = Base64.encode( $scope.twilioUsername + ':' + $scope.twilioAuth );
			$http.defaults.headers.common['Authorization'] = 'Basic ' + base64;
		}
		$scope.regUser = function(){
			var data = $.param({
					Identity : $scope.user
				});
			
			$http.post(
				twilioUser,  data,config
			).success(function(data, status) {
					$scope.data = data;
					$cookieStore.put("userTwilio",data.sid);
					console.log(data.sid);
				}).error(function (data, status) {
					console.log(data);
				});
		}
		
		$scope.createChannel = function(){
			$scope.prepareCall();
			var data2 = $.param({
					Identity : 'uzair'
				});
			var data1 = $.param({
					Identity : 'amjad'
				});
			
			
			var promise1 = $http({
					method: 'POST',
					url: $scope.twilioMembers,
					data: data2,
					headers : {
						'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
					},
					cache: 'true'});
			var promise2 = $http({
					method: 'POST',
					url: $scope.twilioMembers,
					data: data1,
					headers : {
						'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
					},
					cache: 'true'});

			$q.all([promise1,promise2]).then(function(data){
					console.log(data[0],data[1]);
				}, function onError(response) {
					console.log(response);
				});
		}
  
	});


WORKING CODE 2
 app.controller('chatCtrl', function($scope,$http,DataLoader, Base64,$cookieStore,$q) {
		
		$http.get("url.properties")
		.then(function(response) {
			
				$scope.twilioUsername = response.data.twilioUsername;
				$scope.twilioAuth = response.data.twilioAuth;
				$scope.twilioMembers = response.data.twilioMembers;
				$scope.twilioChannel = response.data.twilioChannel;
			
			
			});
		
		$scope.prepareCall = function(){
			var config = {
				headers : {
					'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
				}
			}
			var base64 = Base64.encode( $scope.twilioUsername + ':' + $scope.twilioAuth );
			$http.defaults.headers.common['Authorization'] = 'Basic ' + base64;
		}
		$scope.regUser = function(){
			var data = $.param({
					Identity : $scope.user
				});
			
			$http.post(
				twilioUser,  data,config
			).success(function(data, status) {
					$scope.data = data;
					$cookieStore.put("userTwilio",data.sid);
					console.log(data.sid);
				}).error(function (data, status) {
					console.log(data);
				});
		}
		
		$scope.createChannel = function(){
			$scope.prepareCall();
			var config = {
				headers : {
					'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
				}
			}
			var data2 = $.param({
					Identity : 'uzair'
				});
			var data1 = $.param({
					Identity : 'amjad'
				});
			var data = $.param({
					UniqueName : 'Aaa',
					Type: 'private'
				});			
			$http({method: 'POST', url: $scope.twilioChannel, data: data, config, cache: 'true'}).then(function(data){
				
					console.log(data);
					console.log("FIRST");
					console.log(data);
				
					var promise1 = $http({
							method: 'POST',
							url: $scope.twilioMembers,
							data: data2,
							headers : {
								'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
							},
							cache: 'true'});
					var promise2 = $http({
							method: 'POST',
							url: $scope.twilioMembers,
							data: data1,
							headers : {
								'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
							},
							cache: 'true'});

					$q.all([promise1,promise2]).then(function(data){
							console.log(data[0],data[1]);
						}, function onError(response) {
							console.log(response);
						});
				
				});
			
		}
  
	});
	
	
	
	
	///// FULL WORKING CODE ////////////
	 app.controller('chatCtrl', function($scope,$http,DataLoader, Base64,$cookieStore,$q) {
		
		$http.get("url.properties")
		.then(function(response) {
			
				$scope.twilioUsername = response.data.twilioUsername;
				$scope.twilioAuth = response.data.twilioAuth;
				$scope.twilioMembers = response.data.twilioMembers;
				$scope.twilioChannel = response.data.twilioChannel;
			
			
			});
		
		$scope.prepareCall = function(){
			
			var base64 = Base64.encode( $scope.twilioUsername + ':' + $scope.twilioAuth );
			$http.defaults.headers.common['Authorization'] = 'Basic ' + base64;
		}
		$scope.createChannel = function(){
			$scope.prepareCall();
			var config = {
				headers : {
					'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
				}
			}
		
			var data1 = $.param({
					UniqueName : 'AaaAa',
					Type: 'private'
				});			
			
			$http.post(
				$scope.twilioChannel,  data1,config
			).success(function(data, status) {
					$scope.data = data;
					console.log(data.sid);
					var data2 = $.param({
							Identity : 'uzair'
						});
					var data1 = $.param({
							Identity : 'amjad'
						});
					var promise1 = $http({
							method: 'POST',
							url: $scope.twilioMembers,
							data: data2,
							headers : {
								'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
							},
							cache: 'true'});
					var promise2 = $http({
							method: 'POST',
							url: $scope.twilioMembers,
							data: data1,
							headers : {
								'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;'
							},
							cache: 'true'});

					$q.all([promise1,promise2]).then(function(data){
							console.log(data[0],data[1]);
						}, function onError(response) {
							console.log(response);
						});
				
				
				}).error(function (data, status) {
					console.log(data);
				});
			
		}
  
	});

